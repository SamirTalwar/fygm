#!/bin/bash

set -e

if [[ -n "$(git status --porcelain)" ]]; then
  echo >&2 'This is a destructive operation.'
  echo >&2 'You can only do it from a clean slate.'
  exit 1
fi

git branch $1
git reset --hard origin/$(git name)
git checkout $1
