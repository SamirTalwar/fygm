#!/bin/bash

set -e
set -u

if git symbolic-ref --quiet HEAD; then
  if git rev-parse --abbrev-ref --symbolic-full-name '@{u}' &>/dev/null; then
    git pull --ff-only "$@"
  else
    echo "Not pulling: no upstream branch configured for $(git name)."
  fi
fi

git submodule sync --recursive
git submodule update --init --recursive
