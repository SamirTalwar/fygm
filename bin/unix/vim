#!/usr/bin/env zsh

set -e
set -u

cmd=()
if (( ${+commands[reattach-to-user-namespace]} )); then
  cmd+=(reattach-to-user-namespace)
fi

found=false
if (( ${+commands[nvim]} )); then
  vim=${commands[nvim]}
  cmd+=($vim)
  path=(${vim:h} $path)
  found=true
else
  if vim=$(find-prog vim $0); then
    cmd+=($vim)
    found=true
  fi
fi

exec ${cmd[@]} $@
